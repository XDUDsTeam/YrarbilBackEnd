% 设置格式

%防止重复引用

\ifx \incpreamble \undefined
\def\incpreamble{}
\else
\setcounter{lstnumber}{1}
\endinput
\fi

\makeatletter
\def\doclass{
\ifx \@UseCTEX \undefined
\documentclass[UTF8]{article}
\usepackage{xeCJK}

\setCJKmainfont{WenQuanYi Zen Hei}
\else
\documentclass[UTF8]{ctexart}
\fi
}
\doclass
\makeatother

\makeatletter
\ifx \@NoLiterateHaskell \undefined
\usepackage{xltxtra} %提供 XeLaTeX logo
\usepackage{amsmath}
\usepackage{listings}
\usepackage{color,xcolor}
\newcounter{codeline}
\setcounter{codeline}{1}
\setcounter{lstnumber}{1}

\lstnewenvironment{code}{\lstset{firstnumber=last,language=Haskell,breaklines,backgroundcolor=\color[rgb]{1.00,0.90,1.00},basicstyle=\sffamily,keywordstyle=\bfseries\color[rgb]{0.16,0.53,0.53},commentstyle=\rmfamily\itshape,flexiblecolumns,numbers=left,numberstyle=\tiny,frame=trBL,label=sourceCtr}}{\setcounter{codeline}{\value{lstnumber}}}

\lstnewenvironment{spec}{\lstset{language=Haskell,breaklines,backgroundcolor=\color[rgb]{0.96,0.97,0.38},basicstyle=\sffamily,keywordstyle=\bfseries\color[rgb]{0.16,0.53,0.53},commentstyle=\rmfamily\itshape,flexiblecolumns,numbers=left,numberstyle=\tiny,frame=trBL,label=sourceCtr}}{\setcounter{lstnumber}{\value{codeline}}}

\lstnewenvironment{example}{\lstset{language=Haskell,breaklines,backgroundcolor=\color[rgb]{0.98,0.72,0.43},basicstyle=\sffamily,keywordstyle=\bfseries\color[rgb]{0.16,0.53,0.53},commentstyle=\rmfamily\itshape,flexiblecolumns,numbers=left,numberstyle=\tiny,frame=trBL,label=sourceCtr}}{\setcounter{lstnumber}{\value{codeline}}}

\lstnewenvironment{jsonlists}{\lstset{language=JavaScript,breaklines,basicstyle=\sffamily,keywordstyle=\bfseries\color[rgb]{0.16,0.53,0.53},commentstyle=\rmfamily\itshape,flexiblecolumns,numbers=left,numberstyle=\tiny,frame=trBL,label=sourceCtr}}{\setcounter{lstnumber}{\value{codeline}}}

\long\def\ignore#1{}
\fi
\makeatother

%如果没有 CTEX



\makeatletter
\ifx \@NoJavaScript \undefined
\lstdefinelanguage{JavaScript}
{
  morekeywords={true,false,null},
  alsoletter={:},
  moredelim=[s][{\color[rgb]{0.67,0.00,0.67}}]{"}{"},
  moredelim=[s][{\color[rgb]{0.36,0.67,0.78}}]{:"}{"},
  identifierstyle=\color{blue}
}[keywords,comments,strings]
\fi
\makeatother

\usepackage[colorlinks,linkcolor=blue,anchorcolor=blue,citecolor=red,bookmarksnumbered]{hyperref}

%定义 BibTeX 图标
\def\BibTeX{{\rm B \kern-.05em{\sc i\kern-.025em b}\kern-.08em T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

\author{Qinka\\qinka@live.com}
\title{Yrarbil 后端代码及参考文档}

%设置 section 格式
\usepackage{titlesec,titletoc}
\titleformat{\section}[display]{\Huge\bfseries}{\,\thesection\,}{1em}{}
%\titlecontents{section}[1em]{\bfseries\Lager}{}{}{\titlerule*[1pt]{-}\contentspage}
